(this["webpackJsonpmusical-typing"]=this["webpackJsonpmusical-typing"]||[]).push([[0],{18:function(e,t,a){},25:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(12),s=a.n(n),i=a(19),r=a.n(i),o=(a(25),a(7)),c=a(6),p=a.n(c),g=a(9),u=a(11),m=a(0),l=a(1),h=a(5),d=a(3),b=a(2),j=a(16),v=a(45),O=a(10),f=function e(t){var a=t.name,n=t.noteToFile;Object(m.a)(this,e),this.name=a,this.noteToFile=n,this.isLoaded=!1,this.sampler=null},M={piano:new f({name:"piano",noteToFile:{A0:"A0.[mp3|ogg]",A1:"A1.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]",A5:"A5.[mp3|ogg]",A6:"A6.[mp3|ogg]","A#0":"As0.[mp3|ogg]","A#1":"As1.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]","A#4":"As4.[mp3|ogg]","A#5":"As5.[mp3|ogg]","A#6":"As6.[mp3|ogg]",B0:"B0.[mp3|ogg]",B1:"B1.[mp3|ogg]",B2:"B2.[mp3|ogg]",B3:"B3.[mp3|ogg]",B4:"B4.[mp3|ogg]",B5:"B5.[mp3|ogg]",B6:"B6.[mp3|ogg]",C0:"C0.[mp3|ogg]",C1:"C1.[mp3|ogg]",C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]",C7:"C7.[mp3|ogg]","C#0":"Cs0.[mp3|ogg]","C#1":"Cs1.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]","C#5":"Cs5.[mp3|ogg]","C#6":"Cs6.[mp3|ogg]",D0:"D0.[mp3|ogg]",D1:"D1.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]",D5:"D5.[mp3|ogg]",D6:"D6.[mp3|ogg]","D#0":"Ds0.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]","D#5":"Ds5.[mp3|ogg]","D#6":"Ds6.[mp3|ogg]",E0:"E0.[mp3|ogg]",E1:"E1.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",E5:"E5.[mp3|ogg]",E6:"E6.[mp3|ogg]",F0:"F0.[mp3|ogg]",F1:"F1.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]",F5:"F5.[mp3|ogg]",F6:"F6.[mp3|ogg]","F#0":"Fs0.[mp3|ogg]","F#1":"Fs1.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]","F#6":"Fs6.[mp3|ogg]",G0:"G0.[mp3|ogg]",G1:"G1.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]",G5:"G5.[mp3|ogg]",G6:"G6.[mp3|ogg]","G#0":"Gs0.[mp3|ogg]","G#1":"Gs1.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#3":"Gs3.[mp3|ogg]","G#4":"Gs4.[mp3|ogg]","G#5":"Gs5.[mp3|ogg]","G#6":"Gs6.[mp3|ogg]"}}),cello:new f({name:"cello",noteToFile:{E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#3":"Gs3.[mp3|ogg]","G#4":"Gs4.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]","A#4":"As4.[mp3|ogg]",B2:"B2.[mp3|ogg]",B3:"B3.[mp3|ogg]",B4:"B4.[mp3|ogg]",C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]",E2:"E2.[mp3|ogg]"}})},C=function(){function e(){Object(m.a)(this,e),this.baseUrl="".concat("/musical-typing","/instruments"),this.instruments=M}return Object(l.a)(e,[{key:"load",value:function(){var e=Object(g.a)(p.a.mark((function e(t){var a,n,s,i,r,o=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.map((function(e){return o.instruments[e]})),n=[],s=Object(O.a)(a),e.prev=3,r=function(){var e=i.value;if(e.isLoaded)return"continue";n.push(new Promise((function(t,a){var n=new j.a({baseUrl:"".concat(o.baseUrl,"/").concat(e.name,"/"),urls:e.noteToFile,onload:function(){e.sampler=n,e.isLoaded=!0,t()},onerror:function(e){a(e)}});n.toDestination()})))},s.s();case 6:if((i=s.n()).done){e.next=12;break}if("continue"!==r()){e.next=10;break}return e.abrupt("continue",10);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),s.e(e.t0);case 17:return e.prev=17,s.f(),e.finish(17);case 20:return e.next=22,Promise.all(n);case 22:return e.abrupt("return",e.sent);case 23:case"end":return e.stop()}}),e,null,[[3,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getInstrument",value:function(e){return this.instruments[e]}},{key:"getLoadedInstruments",value:function(){return Object.values(this.instruments).filter((function(e){return e.isLoaded}))}}]),e}(),y=(a(35),a(18),a(8)),x=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={chars:"",note:"C",octave:"3",duration:2e3,velocity:100,instrument:n.props.instruments[0]},n.handleInputChanges=n.handleInputChanges.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"handleInputChanges",value:function(e){var t=e.target,a=t.name,n="checkbox"===t.type?t.checked:t.value;this.setState(Object(u.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t,a=Object(O.a)(this.state.chars);try{for(a.s();!(t=a.n()).done;){var n=t.value;this.props.updateCharMapping(n,{note:this.state.note+this.state.octave,duration:Number(this.state.duration),velocity:Number(this.state.velocity)/127,instrument:this.state.instrument})}}catch(s){a.e(s)}finally{a.f()}}},{key:"render",value:function(){return Object(y.jsxs)("div",{className:"map-form-container",children:[Object(y.jsxs)("form",{className:"map-form",onSubmit:this.handleSubmit,children:[Object(y.jsxs)("div",{className:"map-form__instrument",children:[Object(y.jsx)("label",{htmlFor:"instrument",children:"Instrument: "}),Object(y.jsx)("select",{name:"instrument",value:this.state.instrument,onChange:this.handleInputChanges,children:this.props.instruments.map((function(e,t){return Object(y.jsx)("option",{value:e,children:e},t)}))})]}),Object(y.jsxs)("div",{className:"map-form__chars",children:[Object(y.jsx)("label",{htmlFor:"chars",children:"Char(s): "}),Object(y.jsx)("input",{name:"chars",type:"text",onChange:this.handleInputChanges})]}),Object(y.jsxs)("div",{className:"map-form__note",children:[Object(y.jsx)("label",{htmlFor:"note",children:"Note: "}),Object(y.jsxs)("select",{name:"note",value:this.state.note,onChange:this.handleInputChanges,children:[Object(y.jsx)("option",{value:"C",children:"C"}),Object(y.jsx)("option",{value:"C#",children:"C#"}),Object(y.jsx)("option",{value:"D",children:"D"}),Object(y.jsx)("option",{value:"D#",children:"D#/Eb"}),Object(y.jsx)("option",{value:"E",children:"E"}),Object(y.jsx)("option",{value:"F",children:"F"}),Object(y.jsx)("option",{value:"F#",children:"F#/Gb"}),Object(y.jsx)("option",{value:"G",children:"G"}),Object(y.jsx)("option",{value:"G#",children:"G#/Ab"}),Object(y.jsx)("option",{value:"A",children:"A"}),Object(y.jsx)("option",{value:"A#",children:"A#/Bb"}),Object(y.jsx)("option",{value:"B",children:"B"})]})]}),Object(y.jsxs)("div",{className:"map-form__octave",children:[Object(y.jsx)("label",{htmlFor:"octave",children:"Octave: "}),Object(y.jsx)("select",{name:"octave",value:this.state.octave,onChange:this.handleInputChanges,children:Array(11).fill().map((function(e,t){return Object(y.jsx)("option",{value:t-1,children:t-1},t-1)}))})]}),Object(y.jsxs)("div",{className:"map-form__duration",children:[Object(y.jsx)("label",{htmlFor:"duration",children:"Duration(ms): "}),Object(y.jsx)("input",{name:"duration",type:"text",value:this.state.duration,onChange:this.handleInputChanges})]}),Object(y.jsxs)("div",{className:"map-form__velocity",children:[Object(y.jsx)("label",{htmlFor:"velocity",children:"Velocity: "}),Object(y.jsx)("select",{name:"velocity",value:this.state.velocity,onChange:this.handleInputChanges,children:Array(128).fill().map((function(e,t){return Object(y.jsx)("option",{value:t,children:t},t)}))})]}),Object(y.jsx)("input",{type:"submit",value:"Submit"})]}),Object(y.jsx)("button",{className:"map-form__reset",onClick:this.props.resetMapping,children:"Reset Current Mapping"})]})}}]),a}(n.Component),I=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={newMapName:""},n.handleInputChanges=n.handleInputChanges.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.useMapping=n.useMapping.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"handleInputChanges",value:function(e){var t=e.target,a=t.name,n="checkbox"===t.type?t.checked:t.value;this.setState(Object(u.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.createMapping(this.state.newMapName),this.setState({newMapName:""})}},{key:"useMapping",value:function(e){e.preventDefault(),this.props.useMapping(e.target.getAttribute("href"))}},{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{className:"map-menu-container",children:[Object(y.jsx)("br",{}),Object(y.jsx)("div",{children:"Create New Mapping"}),Object(y.jsxs)("form",{className:"map-create-form",onSubmit:this.handleSubmit,children:[Object(y.jsx)("label",{htmlFor:"newMapName",children:"Map Name: "}),Object(y.jsx)("input",{name:"newMapName",type:"text",onChange:this.handleInputChanges}),Object(y.jsx)("input",{type:"submit",value:"Create"})]}),Object(y.jsx)("br",{}),this.props.orderedCharMaps.map((function(t,a){return Object(y.jsx)("a",{onClick:e.useMapping,href:t.identity,style:{display:"block"},children:t.name},a)}))]})}}]),a}(n.Component),S=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"sortCharMaps",value:function(e){return Object.values(e).sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}))}},{key:"render",value:function(){return Object(y.jsxs)("div",{className:"map-container",children:[Object(y.jsx)(x,{updateCharMapping:this.props.updateCharMapping,resetMapping:this.props.resetMapping,instruments:this.props.charMaps[this.props.activeCharMapIdentity].instruments}),Object(y.jsx)(I,{createMapping:this.props.createMapping,orderedCharMaps:this.sortCharMaps(this.props.charMaps),useMapping:this.props.useMapping})]})}}]),a}(n.Component),F=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).instrumentLibrary=e.instrumentLibrary,n.onKeyPress=n.onKeyPress.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"onKeyPress",value:function(e){var t=e.which,a=String.fromCharCode(t);if(this.props.charMapping[a]){var n=this.props.charMapping[a];this.instrumentLibrary.getInstrument(n.instrument).sampler.triggerAttackRelease(n.notes,n.duration/1e3,void 0,n.velocity)}}},{key:"render",value:function(){return Object(y.jsx)("textarea",{name:"text",id:"",cols:"30",rows:"10",onKeyPress:this.onKeyPress})}}]),a}(n.Component),A=a(20),D=a.n(A),k=(a(37),function(e){var t=e.text,a=e.active,n=e.setMode;return Object(y.jsx)("button",{className:D()("nav__item",{"nav__item--active":a}),onClick:n,children:t})}),G=(a(38),function(e){var t=e.mode,a=e.setMode;return Object(y.jsxs)("nav",{className:"nav",children:[Object(y.jsx)(k,{text:"Map",active:"MAP"===t,setMode:function(){return a("MAP")}}),Object(y.jsx)(k,{text:"Play",active:"PLAY"===t,setMode:function(){return a("PLAY")}})]})}),N=(a(39),a(40),function(e){var t=e.note,a=e.char;return Object(y.jsx)("div",{className:"note-mapping__item",children:"".concat(a," - ").concat(t)})}),E=function(e){var t=e.charMap,a=Object.entries(t.mapping).map((function(e){return{char:e[0],values:e[1]}})).sort((function(e,t){return t<e?t:e}));return Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:t.name}),Object(y.jsx)("div",{className:"note-mapping",children:a.map((function(e){return Object(y.jsx)(N,{note:e.values.notes[0],char:e.char},e.char)}))})]})},B=(a(41),function(e){var t=e.enableSound;return Object(y.jsx)("div",{className:"enable-sound",children:Object(y.jsx)("button",{className:"enable-sound__button",onClick:t,children:"Click Here To Enable Sound"})})}),w=(a(42),function(){return Object(y.jsx)("div",{className:"loading-indicator",children:"Loading Instruments..."})}),L=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;if(Object(m.a)(this,a),n=t.call(this,e),!localStorage.getItem("version")||".3"!==localStorage.getItem("version")){var s=v.a();localStorage.setItem("activeCharMapIdentity",s);var i=Object(u.a)({},s,{identity:s,name:"First Mapping",instruments:["piano","cello"],mapping:localStorage.getItem("charMapping")?JSON.parse(localStorage.getItem("charMapping")):{}});localStorage.setItem("charMaps",JSON.stringify(i)),localStorage.removeItem("charMapping"),localStorage.removeItem("loadedInstruments")}return localStorage.setItem("version",".3"),n.instrumentLibrary=new C,n.state={isSoundEnabled:!1,isLoading:!1,mode:localStorage.getItem("mode")||"MAP",activeCharMapIdentity:localStorage.getItem("activeCharMapIdentity"),charMaps:localStorage.getItem("charMaps")?JSON.parse(localStorage.getItem("charMaps")):{}},n.setMode=n.setMode.bind(Object(h.a)(n)),n.updateCharMapping=n.updateCharMapping.bind(Object(h.a)(n)),n.resetMapping=n.resetMapping.bind(Object(h.a)(n)),n.enableSound=n.enableSound.bind(Object(h.a)(n)),n.createMapping=n.createMapping.bind(Object(h.a)(n)),n.useMapping=n.useMapping.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.charMaps,n=t.activeCharMapIdentity,!(a&&a[n]&&a[n].instruments)){e.next=6;break}return e.next=4,this.loadInstruments(a[n].instruments);case 4:e.next=6;break;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadInstruments",value:function(){var e=Object(g.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.prev=1,e.next=4,this.instrumentLibrary.load(t);case 4:this.setState({isLoading:!1}),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(1),alert("There was an error loading the instruments"),console.log("error loading instruments: ",e.t0),this.setState({isLoading:!1});case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"enableSound",value:function(){j.b.start(),this.setState({isSoundEnabled:!0})}},{key:"setMode",value:function(e){var t=this;this.setState({mode:e},(function(){return localStorage.setItem("mode",t.state.mode)}))}},{key:"updateCharMapping",value:function(e,t){var a=this,n=t.note,s=t.duration,i=t.velocity,r=t.instrument;this.setState((function(t){return{charMaps:Object(o.a)(Object(o.a)({},t.charMaps),{},Object(u.a)({},t.activeCharMapIdentity,Object(o.a)(Object(o.a)({},t.charMaps[t.activeCharMapIdentity]),{},{mapping:Object(o.a)(Object(o.a)({},t.charMaps[t.activeCharMapIdentity].mapping),{},Object(u.a)({},e,{notes:[n],duration:s,velocity:i,instrument:r}))})))}}),(function(){return localStorage.setItem("charMaps",JSON.stringify(a.state.charMaps))}))}},{key:"createMapping",value:function(e){var t=this,a=v.a(),n={identity:a,name:e,instruments:["piano","cello"],mapping:{}};this.setState((function(e){return{activeCharMapIdentity:a,charMaps:Object(o.a)(Object(o.a)({},e.charMaps),{},Object(u.a)({},a,n))}}),(function(){localStorage.setItem("charMaps",JSON.stringify(t.state.charMaps)),localStorage.setItem("activeCharMapIdentity",t.state.activeCharMapIdentity)}))}},{key:"useMapping",value:function(e){var t=this;this.setState({activeCharMapIdentity:e},(function(){return localStorage.setItem("activeCharMapIdentity",t.state.activeCharMapIdentity)}))}},{key:"resetMapping",value:function(){var e=this;this.setState((function(e){return{charMaps:Object(o.a)(Object(o.a)({},e.charMaps),{},Object(u.a)({},e.activeCharMapIdentity,Object(o.a)(Object(o.a)({},e.charMaps[e.activeCharMapIdentity]),{},{mapping:{}})))}}),(function(){return localStorage.setItem("charMaps",JSON.stringify(e.state.charMaps))}))}},{key:"render",value:function(){return Object(y.jsxs)("div",{className:"app",children:[this.state.isLoading?Object(y.jsx)(w,{}):null,this.state.isSoundEnabled?null:Object(y.jsx)(B,{enableSound:this.enableSound}),Object(y.jsx)(G,{mode:this.state.mode,setMode:this.setMode}),Object(y.jsx)(E,{charMap:this.state.charMaps[this.state.activeCharMapIdentity]}),"MAP"===this.state.mode?Object(y.jsx)(S,{updateCharMapping:this.updateCharMapping,resetMapping:this.resetMapping,charMaps:this.state.charMaps,activeCharMapIdentity:this.state.activeCharMapIdentity,createMapping:this.createMapping,useMapping:this.useMapping}):Object(y.jsx)(F,{charMapping:this.state.charMaps[this.state.activeCharMapIdentity].mapping,instrumentLibrary:this.instrumentLibrary})]})}}]),a}(n.Component),_=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,46)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),i(e),r(e)}))};r.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(L,{})}),document.getElementById("root")),_()}},[[43,1,2]]]);
//# sourceMappingURL=main.ba5adefa.chunk.js.map