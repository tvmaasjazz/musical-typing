(this["webpackJsonpmusical-typing"]=this["webpackJsonpmusical-typing"]||[]).push([[0],{24:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(11),s=n.n(a),o=n(18),r=n.n(o),i=(n(24),n(12)),c=n(7),g=n(6),p=n.n(g),u=n(9),m=n(0),l=n(1),h=n(5),d=n(3),b=n(2),j=n(16),v=n(10),f=function e(t){var n=t.name,a=t.noteToFile;Object(m.a)(this,e),this.name=n,this.noteToFile=a,this.isLoaded=!1,this.sampler=null},O={piano:new f({name:"piano",noteToFile:{A0:"A0.[mp3|ogg]",A1:"A1.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]",A5:"A5.[mp3|ogg]",A6:"A6.[mp3|ogg]","A#0":"As0.[mp3|ogg]","A#1":"As1.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]","A#4":"As4.[mp3|ogg]","A#5":"As5.[mp3|ogg]","A#6":"As6.[mp3|ogg]",B0:"B0.[mp3|ogg]",B1:"B1.[mp3|ogg]",B2:"B2.[mp3|ogg]",B3:"B3.[mp3|ogg]",B4:"B4.[mp3|ogg]",B5:"B5.[mp3|ogg]",B6:"B6.[mp3|ogg]",C0:"C0.[mp3|ogg]",C1:"C1.[mp3|ogg]",C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]",C6:"C6.[mp3|ogg]",C7:"C7.[mp3|ogg]","C#0":"Cs0.[mp3|ogg]","C#1":"Cs1.[mp3|ogg]","C#2":"Cs2.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]","C#5":"Cs5.[mp3|ogg]","C#6":"Cs6.[mp3|ogg]",D0:"D0.[mp3|ogg]",D1:"D1.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]",D5:"D5.[mp3|ogg]",D6:"D6.[mp3|ogg]","D#0":"Ds0.[mp3|ogg]","D#1":"Ds1.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]","D#5":"Ds5.[mp3|ogg]","D#6":"Ds6.[mp3|ogg]",E0:"E0.[mp3|ogg]",E1:"E1.[mp3|ogg]",E2:"E2.[mp3|ogg]",E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",E5:"E5.[mp3|ogg]",E6:"E6.[mp3|ogg]",F0:"F0.[mp3|ogg]",F1:"F1.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]",F5:"F5.[mp3|ogg]",F6:"F6.[mp3|ogg]","F#0":"Fs0.[mp3|ogg]","F#1":"Fs1.[mp3|ogg]","F#2":"Fs2.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]","F#5":"Fs5.[mp3|ogg]","F#6":"Fs6.[mp3|ogg]",G0:"G0.[mp3|ogg]",G1:"G1.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]",G5:"G5.[mp3|ogg]",G6:"G6.[mp3|ogg]","G#0":"Gs0.[mp3|ogg]","G#1":"Gs1.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#3":"Gs3.[mp3|ogg]","G#4":"Gs4.[mp3|ogg]","G#5":"Gs5.[mp3|ogg]","G#6":"Gs6.[mp3|ogg]"}}),cello:new f({name:"cello",noteToFile:{E3:"E3.[mp3|ogg]",E4:"E4.[mp3|ogg]",F2:"F2.[mp3|ogg]",F3:"F3.[mp3|ogg]",F4:"F4.[mp3|ogg]","F#3":"Fs3.[mp3|ogg]","F#4":"Fs4.[mp3|ogg]",G2:"G2.[mp3|ogg]",G3:"G3.[mp3|ogg]",G4:"G4.[mp3|ogg]","G#2":"Gs2.[mp3|ogg]","G#3":"Gs3.[mp3|ogg]","G#4":"Gs4.[mp3|ogg]",A2:"A2.[mp3|ogg]",A3:"A3.[mp3|ogg]",A4:"A4.[mp3|ogg]","A#2":"As2.[mp3|ogg]","A#3":"As3.[mp3|ogg]","A#4":"As4.[mp3|ogg]",B2:"B2.[mp3|ogg]",B3:"B3.[mp3|ogg]",B4:"B4.[mp3|ogg]",C2:"C2.[mp3|ogg]",C3:"C3.[mp3|ogg]",C4:"C4.[mp3|ogg]",C5:"C5.[mp3|ogg]","C#3":"Cs3.[mp3|ogg]","C#4":"Cs4.[mp3|ogg]",D2:"D2.[mp3|ogg]",D3:"D3.[mp3|ogg]",D4:"D4.[mp3|ogg]","D#2":"Ds2.[mp3|ogg]","D#3":"Ds3.[mp3|ogg]","D#4":"Ds4.[mp3|ogg]",E2:"E2.[mp3|ogg]"}})},C=function(){function e(){Object(m.a)(this,e),this.baseUrl="./instruments",this.instruments=O}return Object(l.a)(e,[{key:"load",value:function(){var e=Object(u.a)(p.a.mark((function e(t){var n,a,s,o,r,i=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.map((function(e){return i.instruments[e]})),a=[],s=Object(v.a)(n),e.prev=3,r=function(){var e=o.value;if(e.isLoaded)return"continue";a.push(new Promise((function(t){var n=new j.a({baseUrl:"".concat(i.baseUrl,"/").concat(e.name,"/"),urls:e.noteToFile,onload:function(){e.sampler=n,e.isLoaded=!0,t()},onerror:function(e){console.log(e)}});n.toDestination()})))},s.s();case 6:if((o=s.n()).done){e.next=12;break}if("continue"!==r()){e.next=10;break}return e.abrupt("continue",10);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),s.e(e.t0);case 17:return e.prev=17,s.f(),e.finish(17);case 20:return e.next=22,Promise.all(a);case 22:return e.abrupt("return",e.sent);case 23:case"end":return e.stop()}}),e,null,[[3,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getInstrument",value:function(e){return this.instruments[e]}},{key:"getLoadedInstruments",value:function(){return Object.values(this.instruments).filter((function(e){return e.isLoaded}))}}]),e}(),x=(n(34),n(35),n(8)),y=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).state={chars:"",note:"C",octave:"3",duration:2e3,velocity:100,instrument:a.props.instruments[0]},a.handleInputChanges=a.handleInputChanges.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a}return Object(l.a)(n,[{key:"handleInputChanges",value:function(e){var t=e.target,n=t.name,a="checkbox"===t.type?t.checked:t.value;this.setState(Object(i.a)({},n,a))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t,n=Object(v.a)(this.state.chars);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.props.updateCharMapping(a,{note:this.state.note+this.state.octave,duration:Number(this.state.duration),velocity:Number(this.state.velocity)/127,instrument:this.state.instrument})}}catch(s){n.e(s)}finally{n.f()}}},{key:"render",value:function(){return Object(x.jsxs)("div",{className:"map-form-container",children:[Object(x.jsxs)("form",{className:"map-form",onSubmit:this.handleSubmit,children:[Object(x.jsxs)("div",{className:"map-form__instrument",children:[Object(x.jsx)("label",{htmlFor:"instrument",children:"Instrument: "}),Object(x.jsx)("select",{name:"instrument",value:this.state.instrument,onChange:this.handleInputChanges,children:this.props.instruments.map((function(e,t){return Object(x.jsx)("option",{value:e,children:e},t)}))})]}),Object(x.jsxs)("div",{className:"map-form__chars",children:[Object(x.jsx)("label",{htmlFor:"chars",children:"Char(s): "}),Object(x.jsx)("input",{name:"chars",type:"text",onChange:this.handleInputChanges})]}),Object(x.jsxs)("div",{className:"map-form__note",children:[Object(x.jsx)("label",{htmlFor:"note",children:"Note: "}),Object(x.jsxs)("select",{name:"note",value:this.state.note,onChange:this.handleInputChanges,children:[Object(x.jsx)("option",{value:"C",children:"C"}),Object(x.jsx)("option",{value:"C#",children:"C#"}),Object(x.jsx)("option",{value:"D",children:"D"}),Object(x.jsx)("option",{value:"D#",children:"D#/Eb"}),Object(x.jsx)("option",{value:"E",children:"E"}),Object(x.jsx)("option",{value:"F",children:"F"}),Object(x.jsx)("option",{value:"F#",children:"F#/Gb"}),Object(x.jsx)("option",{value:"G",children:"G"}),Object(x.jsx)("option",{value:"G#",children:"G#/Ab"}),Object(x.jsx)("option",{value:"A",children:"A"}),Object(x.jsx)("option",{value:"A#",children:"A#/Bb"}),Object(x.jsx)("option",{value:"B",children:"B"})]})]}),Object(x.jsxs)("div",{className:"map-form__octave",children:[Object(x.jsx)("label",{htmlFor:"octave",children:"Octave: "}),Object(x.jsx)("select",{name:"octave",value:this.state.octave,onChange:this.handleInputChanges,children:Array(11).fill().map((function(e,t){return Object(x.jsx)("option",{value:t-1,children:t-1},t-1)}))})]}),Object(x.jsxs)("div",{className:"map-form__duration",children:[Object(x.jsx)("label",{htmlFor:"duration",children:"Duration(ms): "}),Object(x.jsx)("input",{name:"duration",type:"text",value:this.state.duration,onChange:this.handleInputChanges})]}),Object(x.jsxs)("div",{className:"map-form__velocity",children:[Object(x.jsx)("label",{htmlFor:"velocity",children:"Velocity: "}),Object(x.jsx)("select",{name:"velocity",value:this.state.velocity,onChange:this.handleInputChanges,children:Array(128).fill().map((function(e,t){return Object(x.jsx)("option",{value:t,children:t},t)}))})]}),Object(x.jsx)("input",{type:"submit",value:"Submit"})]}),Object(x.jsx)("button",{className:"map-form__reset",onClick:this.props.resetMapping,children:"Reset Mapping"})]})}}]),n}(a.Component),F=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).instrumentLibrary=e.instrumentLibrary,a.onKeyPress=a.onKeyPress.bind(Object(h.a)(a)),a}return Object(l.a)(n,[{key:"onKeyPress",value:function(e){var t=e.which,n=String.fromCharCode(t);if(this.props.charMapping[n]){var a=this.props.charMapping[n];this.instrumentLibrary.getInstrument(a.instrument).sampler.triggerAttackRelease(a.notes,a.duration/1e3,void 0,a.velocity)}}},{key:"render",value:function(){return Object(x.jsx)("textarea",{name:"text",id:"",cols:"30",rows:"10",onKeyPress:this.onKeyPress})}}]),n}(a.Component),A=n(19),D=n.n(A),G=(n(37),function(e){var t=e.text,n=e.active,a=e.setMode;return Object(x.jsx)("button",{className:D()("nav__item",{"nav__item--active":n}),onClick:a,children:t})}),M=(n(38),function(e){var t=e.mode,n=e.setMode;return Object(x.jsxs)("nav",{className:"nav",children:[Object(x.jsx)(G,{text:"Map",active:"MAP"===t,setMode:function(){return n("MAP")}}),Object(x.jsx)(G,{text:"Play",active:"PLAY"===t,setMode:function(){return n("PLAY")}})]})}),S=(n(39),n(40),function(e){var t=e.note,n=e.char;return Object(x.jsx)("div",{className:"note-mapping__item",children:"".concat(n," - ").concat(t)})}),I=function(e){var t=e.charMapping,n=Object.entries(t).map((function(e){return{char:e[0],values:e[1]}})).sort((function(e,t){return t<e?t:e}));return Object(x.jsx)("div",{className:"note-mapping",children:n.map((function(e){return Object(x.jsx)(S,{note:e.values.notes[0],char:e.char},e.char)}))})},k=(n(41),function(e){var t=e.enableSound;return Object(x.jsx)("div",{className:"enable-sound",children:Object(x.jsx)("button",{className:"enable-sound__button",onClick:t,children:"Click Here To Enable Sound"})})}),E=(n(42),function(){return Object(x.jsx)("div",{className:"loading-indicator",children:"Loading Instruments..."})}),L=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),localStorage.getItem("version")&&".2"===localStorage.getItem("version")||localStorage.clear(),localStorage.setItem("version",".2"),a.instrumentLibrary=new C,a.state={isSoundEnabled:!1,isLoading:!1,mode:localStorage.getItem("mode")||"MAP",charMapping:localStorage.getItem("charMapping")?JSON.parse(localStorage.getItem("charMapping")):{},loadedInstruments:localStorage.getItem("loadedInstruments")?JSON.parse(localStorage.getItem("loadedInstruments")):Object.keys(a.instrumentLibrary.instruments)},a.setMode=a.setMode.bind(Object(h.a)(a)),a.updateCharMapping=a.updateCharMapping.bind(Object(h.a)(a)),a.resetMapping=a.resetMapping.bind(Object(h.a)(a)),a.enableSound=a.enableSound.bind(Object(h.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Array.isArray(this.state.loadedInstruments)&&this.state.loadedInstruments.length>0)){e.next=5;break}return e.next=3,this.loadInstruments(this.state.loadedInstruments);case 3:e.next=5;break;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadInstruments",value:function(){var e=Object(u.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.prev=1,e.next=4,this.instrumentLibrary.load(t);case 4:this.updateLoadedInstruments(),this.setState({isLoading:!1}),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),alert("There was an error loading the instruments"),console.log("error loading instruments: ",e.t0),this.setState({isLoading:!1});case 13:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateLoadedInstruments",value:function(){var e=this.instrumentLibrary.getLoadedInstruments().map((function(e){return e.name}));this.setState({loadedInstruments:e},(function(){return localStorage.setItem("loadedInstruments",JSON.stringify(e))}))}},{key:"enableSound",value:function(){j.b.start(),this.setState({isSoundEnabled:!0})}},{key:"setMode",value:function(e){var t=this;this.setState({mode:e},(function(){return localStorage.setItem("mode",t.state.mode)}))}},{key:"updateCharMapping",value:function(e,t){var n=this,a=t.note,s=t.duration,o=t.velocity,r=t.instrument;this.setState((function(t){return{charMapping:Object(c.a)(Object(c.a)({},t.charMapping),{},Object(i.a)({},e,{notes:[a],duration:s,velocity:o,instrument:r}))}}),(function(){return localStorage.setItem("charMapping",JSON.stringify(n.state.charMapping))}))}},{key:"resetMapping",value:function(){this.setState({charMapping:{}},(function(){return localStorage.setItem("charMapping","{}")}))}},{key:"render",value:function(){return Object(x.jsxs)("div",{className:"app",children:[this.state.isLoading?Object(x.jsx)(E,{}):null,this.state.isSoundEnabled?null:Object(x.jsx)(k,{enableSound:this.enableSound}),Object(x.jsx)(M,{mode:this.state.mode,setMode:this.setMode}),Object(x.jsx)(I,{charMapping:this.state.charMapping}),"MAP"===this.state.mode?Object(x.jsx)(y,{updateCharMapping:this.updateCharMapping,resetMapping:this.resetMapping,instruments:this.state.loadedInstruments}):Object(x.jsx)(F,{charMapping:this.state.charMapping,instrumentLibrary:this.instrumentLibrary})]})}}]),n}(a.Component),B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),o(e),r(e)}))};r.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(L,{})}),document.getElementById("root")),B()}},[[43,1,2]]]);
//# sourceMappingURL=main.2c535353.chunk.js.map